#!/bin/sh

set -e

theme_dir="$HOME/.config/theme"
cancel="x cancel"
theme1="base16"
theme2="brogrammer"
theme3="dracula"
theme4="gruvbox"
theme5="gruvbox-light"
theme6="solarized"
theme7="xterm"
option="$cancel\n$theme1\n$theme2\n$theme3\n$theme4\n$theme5\n$theme6\n$theme7"

change_theme()
{
    cp "${theme_dir}/$1" "${theme_dir}/default"

    xrdb -I"$HOME" $HOME/.config/x11/xresources

    # refreshing dwm
    xdotool key super+F5
}

select="$(echo "$option" | dmenu -l 9 -p "Choose a theme: " )"

case $select in
    $theme1) 
        echo "change theme to $theme1"
        feh --bg-fill $HOME/.config/wallpaper/base16.png
        change_theme base16 ;;
    $theme2) 
        feh --bg-fill $HOME/.config/wallpaper/brogrammer.jpg
        change_theme brogrammer ;;
    $theme3) 
        feh --bg-fill $HOME/.config/wallpaper/dracula.jpg
        change_theme dracula ;;
    $theme4) 
        feh --bg-fill $HOME/.config/wallpaper/gruvbox.png
        change_theme gruvbox ;;
    $theme5) 
        feh --bg-fill $HOME/.config/wallpaper/gruvbox-light.png
        change_theme gruvbox-light ;;
    $theme6) 
        feh --bg-fill $HOME/.config/wallpaper/solarized.png
        change_theme solarized ;;
    $theme7) 
        feh --bg-fill $HOME/.config/wallpaper/xterm.jpg
        change_theme xterm ;;
esac    
